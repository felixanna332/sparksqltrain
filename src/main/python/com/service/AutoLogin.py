import urllib
import urllib.request
import urllib.parse
import http.cookiejar as cookielib
headers = {
    'Referer':'http://eip.gcsoft.com/eip-cas/login?service=http://eip.gcsoft.com/eip-portal/shiro-cas',
    'Host':'eip.gcsoft.com', #可以不要，一般两项就可以
    'User-Agent':'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36'
}

#定义登录地址
login_url = 'http://eip.gcsoft.com/eip-cas/login?service=http://eip.gcsoft.com/eip-portal/shiro-cas'
#定义登录所需要用的信息，如用户名、密码等，详见下图，使用urllib进行编码
login_data = urllib.parse.urlencode({
    "username": '186044',
    "password": 'Gcsoft123',
    "execution":"f2021f27-8792-4d33-9cbd-fe6880308e19_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuWTAxb1JDOVVNMEo1YWtrNE5XWTJabTVzZERSTFRtNXhTWGxPWnpCRWNVOXpaVFJNU2xGcWFGcG9TWFJFUVRSRWFHczRlVE0yYVdkMVMxZGpPVXhxU2pBelp6ZGxNaTlFZERSUVdUSmhMMFJ6YXk5WVZVVnpRbmRaUmtSc1ZqbFlaRkZRZEhWemFIWTFjbVE1ZEVodFVYbGthM0ZaTlRKM1kwdFBUMGxrU2pWVlltTlhXWFJvUzJGRU1sQjFTbXhCUm5Sa1RUbEVaRGRoZDNoTGNGRk5OVUpZVEhJdk1ISlJTek5MU1RWQmJrdFFaUzlNTDNGMFNFbE5iRmwyTUdzME5qVkJMM0ZOVkhKT1JsbzJkalJvUVVoNWJtOUZia3BLZVVkeFNVSlFWa1owTnpkSGVFTk9iVGQzTWpSTlEyMUJPV2xyTm1SWU9EUnRWV3RSVTJSSGNFaFVXRE0wT0dOT1R6WkRibmxKVDJsTlRtMU1RVGhRVW1oNU9YZHhUMFp3UTFCNlMzWlpUakJrVkRoSmJEQmxTMHRwU1dndk9YYzBhMDFJUldaWVduWlhWbkpJTkVsVlpVSkViVTVJVWpBMFJERnJOMjgwWkRGa04zbFNUbUZRYVVSM1kwMXFPVnBFZFVNeVQyTjFZakJ1WWpsUmNISndRWE5QVlhGNU5YbExiR1IwYlhWT2R6ZzBOa3RLWVhNNWVUTjRUMVEyYkRWbmREVjBWa3BUYlRSVVEyVjRRM0JXVERkTWVESjFjRkJQVVVSYVpXUmpMMjkxWmpVM1NIWktSbU01VGpodWRGTnNla2xNT0hkTFJsYzNUMFp4TXpoMGN6ZFFPRGRNT0Zwd2IwbHJNSEI1V2pGcVowb3lVa3hxU25sTlZYRkpOVVJwWVVSTWVHTTVMMVF3YjFaQ2FXWlJXbE5TYmpSeGNtSnROMkoxZEhZNGFUSXlTRVl4YWxJMVdFNVhURFoxY0VRcmIxcGpXSEkzVW1FcmVEZHBSRFZyYkROS1ZuSmlWVmxFWldOcksxVjNRbUpqVW5Kb1QxWnVSVUZMWnpsMFJqTTNMMFZTZUd0a1JVeHlUblkyVjBSdEx6QnNhMUpOYUZoSU0wNU5kVmR0TkhOcE1taFRUM054YkV0b1YwUlVXVlpSVEV4c1ZVdGhhMGRzWXpSQ1ZFVnlUWGd5Tldod1ZEUjFTUzh6WVZKelZHaFZVbEUwZVZneldUaHdTRFpGTlhkRFVtdE9LM0psYkhWSFdsSkpjMnNyZDBob1JXUXlaWGhJT0hscFNrNXBiR1p0U1V3d1FTczJObU14VXpZcldVeGpOemhLYUdWaVdISlBXbEEzTVVoTlZrTmphbG92YldkVE1VbFBSbVZLZGxWNU1uRmhkbUZpVlhCbVIxVkZlVGRXZFZSRVRFOXZiM1F5TlRkQllUTkhLMHhsTlVGUWNIaDJOMU51T1VwcVdGUmtNVXQyYVM4M2NUUmxibVpXU1dacWFIaHJiMHRNY0hCWFVrOTNOMjV2VURWdU9WTjRUSFZ2UkZoS2JXcFhiRFIwVlVaeFFsaExMekZ2U21oNE4xWktXbVIyTW14WVJFeHpNRmg0SzFCM1dEUnliVmhqYTNOamRqRTJhakI1VmpNNWFtOWFVRzlqSzNaVFptUldkbWRyVkdoTGJqRTRTRE5TVkRGMk1UQnZhbUZIVW5sNVVqVjVURWhvUkZkNmNHdGlWRmc1ZGxaeFl6VklkakJJUjB0VWVsZG5SV1JDY21aRk0xZGlaRVJIUjJzNFFVUm1lVUozUVRjeFVYcHZTV3BpZGtKYVRFWnRXa05GSzA1Sk1Ga3hOMnh6ZVZNMUsxWmhla04xVDBaMU1XcEZOemxRYW0wclRsTjJjVzVrTURWeVNuaHZWWGxIYVd0b2NrbHlSV1JFYmtKUVJFNUNjbTlPZUZvNVRpdEpha1kzUjNONlJETmxWR2hzUzFCYU1VTm9WM1JDT0ZGMGJYZ3ZWVk4zVnpZeFNreDNhQ3R1T1ZScmRXeFBNMFUxZVd0WFZEaHZUVTl5ZVU0cldUQTVjemhWYW5vck5YVXdjMVpCTlc1cGVXNURia2h2TmpoeVNHNXdialJLU0RNdmVrWm9SWFZrZWpBd1UyMXhPU3R1VGxZeVZVUktZU3RCWjNOdFJteHlXbkZNYUdGSGRtcE5aMjlPYjNVMWVscHVjU3RGTm1obWVHaG5aMXAyUlVOUlpXaHRSR1JTVGs0d0swMUxjalZyYmxSNWNXMUlibHBZWWxnelNqRk5jR2xIYzNSNWVYQklaRzlRUlhwSGJWZzFiU3MwUjJWNU0xRjBaVFpyYld4alJFVk9aSG9yU1VKU1VEaHpNVkZQYzJkdlZHSm1NVE5HVEhjck5UZENZbWhqYVM5UVQyaE5USGhxZDJWTk0wNVZWa3Q1YkZwQ0wxTnhRbWRUT1haT2JYTkxTRWhPYjNCS1RtdDRPVUZsUW1KSmNHaFZXbVo2Vm1adFoyd3dObFpDSzNadk1uRjFhRGRGV1ZaclFrOWtVbWhOVGpaUFRrcHZSemxNT0ZCM1ZVZFhVbTlsUW1OcEszTkVUbGQxV1RSbFYycE1lV2xYUlZkQlpVODRVREZXZUdJNGRITlpTMFJPTVZnclUwSkZhMUE0VHpZelZXbFdVRFpIWTJKcE0zRXZiVEpuU25wcllscHFiMGR3UVdoSlNXeHZVa2gzYnpoSWVrbFJLMGM0WjBkM2FuRkhVbEptWW1kMlVXUlVhbFZ3TDJjMFJubDZMMmd2TWxSb1prNDRPV1ZoVDFwWmFWcFJSbmcxUlRaeGJWcHdZWFE1ZUZOdk1VbzFOMHRoVDB4NWVXNUNXU3RyY25NcmFWUm1Ra3BJYTFSQk0yVjVhbUozTm5oT05UWkVVR1JSU0c1YU0yazJUazFMTmtScVoycEtZVlZ3WkdwNFpYTjJaVTFaYWpoeWNrcHFlRGxTV1ZwR1lVaExURlJZZDFsdFV6RnBTbFJUV1hkNWMxUnJkVmhXZDJsbGNVRnplRzFJTVhRell6TnhSamhPZFUxalNYSm5VMW95UlVaWWVHUnRVekU1ZUhaRVNtSmFUSHBYTWxGUldtbHVTMlJ6YUUxd09Ha3ZhV3gyT0ZZMk0wUnNZbGRaV1ZoRWFrTTFObkpNYVd3MWNXODFUbVZ1TVN0U056TktOSGRSUkhKcFNHWnRZMjU2VjFOME1uRnBObEEyZDJsNVJDOXNLMDF0Tm1wNFUxcHFNRGxTYkU5Sk5GYzBOa0U0ZFZaNU9IWXlUM0V6TlM5VmVXWXZaamxvWjNWT2FsY3dWWFUxTkdGc1pITTNkbkJsWWxCcldXeG9ibGRKWTJ0cWRtTnVXVVl6ZUhSMmMzVkVLM1J0ZERGU2NXczRPVzUxU1VwbVpuRjJjMFpRVUUxak9IZFdjbVJJVUVReWQwWk1jbXRuTVRjd2FGZERPV2w1VFRsdmJ5OXBVemhZVnpaWlVXSmhWVFJPTm1oNmFuVnFZVTAyWVUxQ1dXUkVNbUZaVEdOWk4yMVFMME5pVDNsblNGaEliVFpYYURKNE1GSkNURTlEUTB4cFZXbEVUVlJ5TkdKSk4xQjNOMjlOSzFCelRrSjBWSFJ6YmxBMU1IWjFNazFHUkVWVmVuUk1ibUkxTDNsWlppdHJRMUJVUTB4UlRWZ3dVVWhyUlVKYVExUlRhbUpPYWxwb01tOUtZVzl4U2xSemFucDJOeXR6YTNOTlNFczVSMk14VkhFdkwzZDNhR3N3ZDBSS05tUnNLMUZtUkcxc1EweHVSRFpFY3pkTFNXOVpjM2h6UkhFMkwxaFJjVE41Vm1OS2IwbFRkRFZ2VW5oclVta3dNMjVUSzNCb2VsZExlamN2ZEd0VVRUVnJNRzRyV2tSM1lqazBXalJXVkdSVlpDdGhVV2xTVVdwMlltUlFSbGhVY2xobGIyRklWbGRSU2tOblVpdHdWa000YWs5eGMzSXZTRFZhUjBoTGRrUkNWWE5tU20xQ1drNXVUVWt5Ym5Cd1dtVjFTM1JwT1hKNE5VSnVXRVpVZEhRNVNrRndNMmt6T1dKMFlrdEtTVkJFUkM5TUswOHhUME0zVUdGbGF6TlViMVJITW14MlREaGhjM1paWlc1TFdqZEVTVzQ1UXpWSFowYzRhMGR5VVV0RFdIZFZkblk0ZUROUU5VaHFkMlJKUmxONFYxcDRaa2cxZDIxclVWaFViRUZWZEcxWWNIZDBSVXg1YjI5S2IxWlJaRkpLWW1aMU5IRlpSbWQ0Umxrek1WTmxUbmQyVml0VldHOVRPVVYyZVZwa2NUVTFka2hNVW1sd1JraE5VWFpWWm1JclJEVjNQVDAuV09GbTNueFMzNnZNYUNTMWxqRHFGMFQySFZxY2Y2T1d5Rjc4YnozSjloWS1JQzNQTUdBWmI2OG1aOE1xTHI1Z0FBcVV0OWc4bGVfUms5MVh5cXBFOHc=",
    "_eventId": "submit",
    "submit": "登录"}).encode(encoding='UTF8')

#设置一个cookie处理器，它负责从服务器下载cookie到本地，并且在发送请求时带上本地的cookie
cj = cookielib.CookieJar() #获取Cookiejar对象（存在本机的cookie消息）
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cj)) #自定义opener,并将opener跟CookieJar对象绑定
urllib.request.install_opener(opener) #安装opener,此后调用urlopen()时都会使用安装过的opener对象
response=urllib.request.urlopen(login_url,login_data) #访问登录页，自动带着cookie信息
print(opener.open(""))
print( response) #返回登陆后的页面源代码